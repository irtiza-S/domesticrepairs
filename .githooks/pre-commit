#!/bin/bash

#this git hook is responsible for first checking the git config user.email value is set to @coventry.ac.uk


set -e
echo "PRE-COMMIT"
EMAIL=$(git config user.email)

if [[ $EMAIL != *"@coventry.ac.uk" ]]
then
    echo "This email is invalid, aborting commit. Setting up your config email now... "
    read -p 'Type in your university email: ' UNI_EMAIL
    git config --global user.email "${UNI_EMAIL}"
    exit 0
else
    exit 0
fi

deno lint --unstable



